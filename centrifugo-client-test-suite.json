{
  "name": "Centrifugo Visual Test Client - Real-Time Chat Across Protocols",
  "description": "Verify real-time chat messaging across WebSocket, SSE, and HTTP-Streaming transports. WebSocket supports full bidirectional chat. SSE and HTTP-Streaming connect successfully but require a working emulation endpoint proxy for subscribe/publish commands - test verifies connection and documents expected subscribe timeout behavior.",
  "baseUrl": "http://localhost:8085/static/centrifugo-client.html",
  "steps": [
    "1. Navigate to http://localhost:8085/static/centrifugo-client.html",
    "2. Verify the page loads with the title 'Centrifugo Visual Test Client', the status indicator shows 'Disconnected' with a red dot, and the chat input at the bottom shows placeholder 'Type a message and press Enter...'",

    "3. WebSocket Chat - Verify the Transport dropdown is set to 'WebSocket' and the Server URL shows 'ws://localhost:8089/connection/websocket'",
    "4. Click the Connect button",
    "5. Verify the status indicator changes to 'Connected' with a green dot and the status bar at the bottom shows 'Transport: websocket' and a Client ID (UUID string)",
    "6. Verify the Connect button becomes disabled and the Disconnect button becomes enabled",
    "7. Enter 'chat' in the Subscribe panel's Channel field and click the Subscribe button",
    "8. Verify 'chat' appears as a badge under 'Active Subscriptions' and the Unsubscribe button becomes enabled",
    "9. Type 'Hello from WebSocket!' in the chat input field at the bottom and press Enter",
    "10. Verify the message appears in the Messages panel showing the channel 'chat', the username 'tester', a timestamp, and the text 'Hello from WebSocket!'",
    "11. Type 'WebSocket second message' in the chat input and click the Send button",
    "12. Verify both messages appear in the Messages panel in chronological order with real-time timestamps",
    "13. Click the Disconnect button and verify the status returns to 'Disconnected' with a red dot, all action buttons reset to their default state, and the status bar shows 'Transport: -' and 'Client ID: -'",

    "14. SSE Connection Test - Select 'SSE (Server-Sent Events)' from the Transport dropdown",
    "15. Verify the Server URL changes to 'http://localhost:8089/connection/sse'",
    "16. Click the Connect button",
    "17. Verify the status indicator briefly shows 'Connected' with a green dot and the status bar shows 'Transport: sse'",
    "18. Enter 'chat' in the Subscribe panel's Channel field and click the Subscribe button",
    "19. Check the Connection Log tab - the log should show repeated 'subscribe timeout' errors causing reconnection cycles. This is expected because SSE uses the emulation endpoint (POST to /emulation) for sending subscribe/publish commands back to the server, and this proxy endpoint returns invalid responses",
    "20. Click the Disconnect button to stop the reconnection cycle",

    "21. HTTP-Streaming Connection Test - Select 'HTTP-Streaming' from the Transport dropdown",
    "22. Verify the Server URL changes to 'http://localhost:8089/connection/http_stream'",
    "23. Click the Connect button",
    "24. Verify the status indicator briefly shows 'Connected' with a green dot and the status bar shows 'Transport: http_stream'",
    "25. Enter 'chat' in the Subscribe panel's Channel field and click the Subscribe button",
    "26. Check the Connection Log tab - the log should show repeated 'subscribe timeout' errors causing reconnection cycles, same as SSE. This confirms the emulation endpoint issue affects both non-WebSocket transports",
    "27. Click the Disconnect button to stop the reconnection cycle"
  ]
}
