{
  "name": "Centrifugo Visual Test Client - Real-Time Chat Across Protocols",
  "description": "Verify real-time chat messaging across WebSocket, SSE, and HTTP-Streaming transports with multiple simulated chat messages per protocol. WebSocket uses direct client publish. SSE and HTTP-Streaming publish transparently via the Server HTTP API.",
  "baseUrl": "http://localhost:8085/static/centrifugo-client.html",
  "steps": [
    "1. Navigate to http://localhost:8085/static/centrifugo-client.html",
    "2. Verify the page loads with the title 'Centrifugo Visual Test Client', the status indicator shows 'Disconnected' with a red dot, and the chat input at the bottom shows placeholder 'Type a message and press Enter...'",

    "--- WebSocket Chat ---",
    "3. Verify the Transport dropdown is set to 'WebSocket' and the Server URL shows 'ws://localhost:8089/connection/websocket'",
    "4. Click the Connect button",
    "5. Verify the status indicator changes to 'Connected' with a green dot, the status bar shows 'Transport: websocket' and a Client ID, the Connect button is disabled and Disconnect is enabled",
    "6. Enter 'chat' in the Subscribe panel's Channel field and click the Subscribe button",
    "7. Verify 'chat' appears as a badge under 'Active Subscriptions' and the Unsubscribe button becomes enabled",
    "8. Type 'Hello everyone, WebSocket here!' in the chat input and press Enter",
    "9. Verify the message appears in the Messages panel with channel 'chat', username 'tester', a timestamp, and text 'Hello everyone, WebSocket here!'",
    "10. Type 'This is my second message' in the chat input and click the Send button",
    "11. Type 'And a third one for good measure' in the chat input and press Enter",
    "12. Verify all three messages appear in the Messages panel in chronological order, each showing channel 'chat', username 'tester', and a real-time timestamp",
    "13. Now simulate an incoming message from another user: In the Server HTTP API panel, select 'Publish' from the Method dropdown",
    "14. Verify the Params JSON field is prefilled. Change it to: {\"channel\": \"chat\", \"data\": {\"text\": \"Hey! I joined via the server API.\", \"user\": \"admin\"}}",
    "15. Click the Execute button",
    "16. Verify a fourth message appears in the Messages panel with username 'admin' and text 'Hey! I joined via the server API.'",
    "17. Verify the Messages panel now shows all 4 messages in order: three from 'tester' and one from 'admin'",
    "18. Click the Disconnect button and verify the status returns to 'Disconnected' with a red dot, Transport shows '-', Client ID shows '-'",

    "--- SSE Chat ---",
    "19. Select 'SSE (Server-Sent Events)' from the Transport dropdown",
    "20. Verify the Server URL changes to 'http://localhost:8089/connection/sse'",
    "21. Click the Connect button",
    "22. Verify the status indicator changes to 'Connected' with a green dot and the status bar shows 'Transport: sse'",
    "23. Enter 'chat' in the Subscribe panel's Channel field and click the Subscribe button",
    "24. Verify 'chat' appears as a badge under 'Active Subscriptions' and the Connection Log tab shows 'Subscribed to chat successfully'",
    "25. Type 'Hello from SSE transport!' in the chat input and press Enter",
    "26. Verify the message appears in the Messages panel with channel 'chat', username 'tester', and text 'Hello from SSE transport!'",
    "27. Type 'SSE second message works too' in the chat input and press Enter",
    "28. Type 'Three for three on SSE' in the chat input and press Enter",
    "29. Verify all three SSE messages appear in the Messages panel in chronological order",
    "30. Simulate an incoming message: In the Server HTTP API panel, ensure Method is 'Publish' and set Params to: {\"channel\": \"chat\", \"data\": {\"text\": \"Server-side message over SSE!\", \"user\": \"bot\"}}",
    "31. Click the Execute button",
    "32. Verify the server-published message appears in the Messages panel with username 'bot' and text 'Server-side message over SSE!'",
    "33. Verify the Messages panel now shows all 4 messages in order",
    "34. Click the Disconnect button and verify the status returns to 'Disconnected' with a red dot",

    "--- HTTP-Streaming Chat ---",
    "35. Select 'HTTP-Streaming' from the Transport dropdown",
    "36. Verify the Server URL changes to 'http://localhost:8089/connection/http_stream'",
    "37. Click the Connect button",
    "38. Verify the status indicator changes to 'Connected' with a green dot and the status bar shows 'Transport: http_stream'",
    "39. Enter 'chat' in the Subscribe panel's Channel field and click the Subscribe button",
    "40. Verify 'chat' appears as a badge under 'Active Subscriptions' and the Connection Log tab shows 'Subscribed to chat successfully'",
    "41. Type 'Hello from HTTP-Streaming!' in the chat input and press Enter",
    "42. Verify the message appears in the Messages panel with channel 'chat', username 'tester', and text 'Hello from HTTP-Streaming!'",
    "43. Type 'HTTP-Stream message number two' in the chat input and press Enter",
    "44. Type 'And the final HTTP-Stream message' in the chat input and press Enter",
    "45. Verify all three HTTP-Streaming messages appear in the Messages panel in chronological order",
    "46. Simulate an incoming message: In the Server HTTP API panel, ensure Method is 'Publish' and set Params to: {\"channel\": \"chat\", \"data\": {\"text\": \"Incoming from server over HTTP-Stream!\", \"user\": \"system\"}}",
    "47. Click the Execute button",
    "48. Verify the server-published message appears in the Messages panel with username 'system' and text 'Incoming from server over HTTP-Stream!'",
    "49. Verify the Messages panel now shows all 4 messages in order",
    "50. Click the Disconnect button and verify the status returns to 'Disconnected' with a red dot"
  ]
}
